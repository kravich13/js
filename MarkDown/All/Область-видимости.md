- [Глобальная область видимости](#глобальная-область-видимости)
- [Видимость в функции. Переменная var](#видимость-в-функции-переменная-var)
  - [У каждой итерации цикла создается своя область видимости](#у-каждой-итерации-цикла-создается-своя-область-видимости)
- [Переменная let](#переменная-let)
- [Const](#const)


## Глобальная область видимости 
Код вне любых функций или за пределами функции.

Переменные, созданные в глобальной области видимости будут видны везде
`var a = 1` - будет видно везде



## Видимость в функции. Переменная var

Переменная `var` ограничена областью функции, т.е. вне функции переменная не видна.
Пример: 

```javascript 
function f() {
    var b = 3
}
console.log(b) // будет error т.е. переменная не видна вне функции
```


Переменные var всплывают до того, как они были объявлены

Пример: 
```javascript
console.log(c) // будет 13
var c = 13
```


### У каждой итерации цикла создается своя область видимости

Пример:

```javascript
function krav () {
    for (let i = 0; i < 10; i++) {
        let a = 5
        console.log(a) // 10 раз выведет 5 ибо i 1, 2...10 не видят друг друга, они в разных мирах =)
    }
}
krav()
```


## Переменная let 

`let` ограничена блоком кода `{ }`

```javascript
function kravich () {
    if (true) {
        let krav = 13
    }
    console.log(krav) // error, let не видно за пределами { }
}
```

`let` нельзя переопределять.
Пример: 

```javascript
let kravich = 6
let kravich = 13
kravich // error. Переопределение запрещено, в переменной останется 6
```



## Const

`Const` - это точная копия `let`, только в ней нельзя переприсваивать значения. Она статична.

```javascript
const d = 4
d = 5 // error, перезапись запрещена
```


`Const` запрещает переприсваивание объектам, но не внутренним объектам
Пример:

```javascript
const krav = [1,2]
const[2] = 3
const // [1,2,3] - изменение запрещается
```


`Const` может изменять внутреннее содержимое объектов
Пример: 

```javascript
const obj = {}
obj.name = "Vlad"
obj // name: "Vlad"
```



 x| var | let | const 
 -|-|-|-|
 область видимости | функция | `{}` | `{}`
 переобъявление | да | нет | нет
 переопределение | да | да | нет (но можно изменять свойство объекта)
 всплытие | да | нет | нет
 

`var` не создает уровни видимости на уровне цикла.

```javascript
for (var = 0; i < 10; i++) {
    setTimeout(function ()) {
        console.log(i)
    }, 2000)
}
// выведет 10 10 раз из-за var
``` 


```javascript
for (let = 0; i < 10; i++) {
    setTimeout(function ()) {
        console.log(i)
    }, 2000)
}
// выведет 1,2..10 через 10 секунд
```
В случае с `var` вместо `let` такое не сработает ибо `let[i]` - это отдельная вселенная


Если бы хотелось решить задачу с помощью `var`, то пришлось бы создать обёртку в виде функции (функцию обёртку)

```javascript
for (var = 0; i <10; i++) {
    (function (n) { // функция обёртка
        setTimeout(function() {
            console.log(n)
        }, 2000, i)
    })(i) // вызовы функции обёртки
}
```

В самовызывающуюся функцию обёртку передаём текущее значение i, т.е. на первой итерации цикла i = 0, на второй - i = 1 и т.д..
Попадая внутрь функции  это значение записывается в параметр n и далее в консоль логе вызываем уже его и уже неважно как изменилась внешняя i