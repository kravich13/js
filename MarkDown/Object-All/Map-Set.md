- [Map](#map)
- [Перебор Map](#перебор-map)
- [Object.entries: Map из Object](#objectentries-map-из-object)
- [Object.fromEntries: Object из Map](#objectfromentries-object-из-map)
- [Set](#set)
- [Перебор объекта Set](#перебор-объекта-set)

## Map

`Map` - это коллекция ключ/значение, как и `Object`. Но основное отличие в том, что `Map` позволяет использовать ключи любого типа.

Методы и свойства:

* `new Map()` - создает коллекцию;
* `map.set(key, value)` - записывает по ключу `key` значение `value`;
* `map.get(key)` – возвращает значение по ключу или `undefined`, если ключ `key` отсутствует;
* `map.has(key)` – возвращает `true`, если ключ `key` присутствует в коллекции, иначе `false`;
* `map.delete(key)` – удаляет элемент по ключу `key`;
* `map.clear()` – очищает коллекцию от всех элементов;
* `map.size` – возвращает текущее количество элементов.

`Map` может использовать объекты в качестве ключей.

```javascript
let vlad = { name: "Vlad" }

let visit = new Map() // создали коллекцию

visit.set(vlad, 123) // применили к мапу ключ vlad (объект) и значением 123

visit.get(vlad) // получили по ключу vlad (объект) значение 123
```
***

## Перебор Map

Для перебора коллекции `Map` есть 3 метода:

* `map.keys()` – возвращает итерируемый объект по ключам;
* `map.values()` – возвращает итерируемый объект по значениям;
* `map.entries()` – возвращает итерируемый объект по парам вида [ключ, значение], этот вариант используется по     умолчанию в for..of.

Например: 

```javascript
// создаём коллекцию мап из двумерного массива
let recipeMap = new Map([
  ["огурец", 500],
  ["помидор", 350],
  ["лук",    50]
]) 

// перебор по ключам (овощи)
for (let vegetable of recipeMap.keys()) { // работает потому, что указали vegetable как ключ (строка)
  console.log(vegetable) // огурец, помидор, лук
}

// перебор по значениям (числа)
for (let amount of recipeMap.values()) { // работает потому, что amount указали как values (числа)
  console.log(amount) // 500, 350, 50
}

// перебор по элементам в формате [ключ, значение]
for (let entry of recipeMap) { // то же самое, что и recipeMap.entries()
  console.log(entry) // огурец,500 (и так далее)
}
```

По сути, это работает так же, как:

```javascript
let obj = { name: "Vlad", age: 22 }

for (let key in obj) {
    console.log(key) // name, age
    console.log(obj[key]) // Vlad, 22
}
```

Кроме этого, `Map` имеет встроенный метод `forEach`, схожий со встроенным методом массивов `Array`:

```javascript
// выполняем функцию для каждой пары (ключ, значение)
recipeMap.forEach((value, key, map) => {
  console.log(`${key}: ${value}`) // огурец: 500 и так далее
})
```

***

## Object.entries: Map из Object

При создании `Map` мы можем указать массив (или другой итерируемый объект) с парами ключ-значение для инициализации, как здесь:

```javascript
// массив пар [ключ, значение]
let map = new Map([
  ['1',  'str1'],
  [1,    'num1'],
  [true, 'bool1']
])

console.log( map.get('1') ) // str1
```

Если у нас уже есть обычный объект, и мы хотели бы создать `Map` из него, то поможет встроенный метод `Object`.`entries(obj)`, который получает объект и возвращает массив пар ключ-значение для него, как раз в этом формате.

Так что мы можем создать Map из обычного объекта следующим образом:

```javascript
let obj = {
  name: "Vlad",
  age: 22
}

let map = new Map(Object.entries(obj))
```

Здесь `Object.entries` возвращает массив пар ключ-значение: `[ ["name","Vlad"], ["age", 22] ]`. Это именно то, что нужно для создания `Map`.
***

## Object.fromEntries: Object из Map

Есть метод `Object.fromEntries`, который делает противоположное: получив массив пар вида [ключ, значение], он создаёт из них объект:

```javascript
let prices = Object.fromEntries([
  ['banana', 1],
  ['orange', 2],
  ['meat', 4]
])

// now prices = { banana: 1, orange: 2, meat: 4 }

alert(prices.orange) // 2
```

Метод `Object.fromEntries` можно использовать, чтобы получить обычный объект из `Map`.
К примеру, есть данные в `Map`, но их нужно передать в сторонний код, который ожидает обычный объект.

```javascript
let map = new Map()
map.set('banana', 1)
map.set('orange', 2)
map.set('meat', 4)

let obj = Object.fromEntries(map.entries()) // теперь obj можно брать как obj.key

// готово!
// obj = { banana: 1, orange: 2, meat: 4 }

console.log(obj.orange) // 2
```

Вызов `map.entries()` возвращает массив пар ключ/значение, как раз в нужном формате для `Object.fromEntries`.
***

## Set

Объект `Set` – это особый вид коллекции: «множество» значений (без ключей), где каждое значение может появляться только один раз.


Его основные методы это:

* `new Set(iterable)` – создаёт `Set`, и если в качестве аргумента был предоставлен итерируемый объект (обычно это массив), то копирует его значения в новый `Set`;
* `set.add(value)` – добавляет значение (если оно уже есть, то ничего не делает), возвращает тот же объект `set`;
* `set.delete(value)` – удаляет значение, возвращает `true` если `value` было в множестве на момент вызова, иначе false;
* `set.has(value)` – возвращает `true`, если значение присутствует в множестве, иначе `false`;
* `set.clear()` – удаляет все имеющиеся значения;
* `set.size` – возвращает количество элементов в множестве.

Основная «изюминка» – это то, что при повторных вызовах `set.add()` с одним и тем же значением ничего не происходит, за счёт этого как раз и получается, что каждое значение появляется один раз.
***

## Перебор объекта Set

Можно перебрать содержимое объекта `set` как с помощью метода `for..of`, так и используя `forEach`:

```javascript
let set = new Set(["апельсин", "яблоко", "банан"])

for (let value of set) console.log(value) 

// то же самое с forEach:
set.forEach((value, valueAgain, set) => {
  console.log(value)
})  
```

`Set` имеет те же встроенные методы, что и `Map`:

* `set.keys()` – возвращает перебираемый объект для значений;
* `set.values()` – то же самое, что и `set.keys()`, присутствует для обратной совместимости с `Map`;
* `set.entries()` – возвращает перебираемый объект для пар вида [значение, значение], присутствует для обратной совместимости с Map.
